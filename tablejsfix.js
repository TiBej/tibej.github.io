const jsonToolList = `
{
    "tool": [
        {
           "name":"Moodle [2] ",
           "scenario":[
              0,
              2,
              3,
              4,
              5,
              6,
              7,
              8,
              10,
              11,
              12,
              13,
              14,
              15,
              16,
              17
           ],
           "instructionLink":"<a href=\'https://www.digitallernen.ch/themen/moodle/\' target='_blank'>digitallernen.ch</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'>FDL</a>"
        },
        {
           "name":"Moodle Wiki",
           "scenario":[
              3,
              4,
              5,
              6,
              7,
              13,
              14,
              15,
              17
           ],
           "instructionLink":"<a href=\'https://www.digitallernen.ch/themen/moodle/\' target='_blank'>digitallernen.ch</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'>FDL</a>"
        },
        {
           "name":"Moodle Test",
           "scenario":[
              4,
              5,
              6,
              8,
              10,
              11,
              13,
              14,
              15,
              16
           ],
           "instructionLink":"<a href=\'https://www.digitallernen.ch/themen/moodle/\' target='_blank'>digitallernen.ch</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'>FDL</a>"
        },
        {
           "name":"Moodle EtherPad & EtherCalc",
           "scenario":[
              3,
              4,
              5,
              6,
              7,
              13,
              14,
              15,
              16,
              17
           ],
           "instructionLink":"<a href=\'https://www.digitallernen.ch/themen/moodle/\' target='_blank'>digitallernen.ch</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'>FDL</a>"
        },
        {
           "name":"Moodle Aufgabe ",
           "scenario":[
              4,
              5,
              6,
              7,
              10,
              11,
              13,
              14,
              15,
              17
           ],
           "instructionLink":"<a href=\'https://www.digitallernen.ch/themen/moodle/\' target='_blank'>digitallernen.ch</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'>FDL</a>"
        },
        {
           "name":"Moodle Forum",
           "scenario":[
              0,
              2,
              4,
              5,
              6,
              7,
              13,
              14,
              15,
              17
           ],
           "instructionLink":"<a href=\'https://www.digitallernen.ch/themen/moodle/\' target='_blank'>digitallernen.ch</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'>FDL</a>"
        },
        {
           "name":"Moodle Studierenden-Ordner",
           "scenario":[
              3,
              4,
              5,
              6,
              7,
              11,
              12,
              13,
              14,
              15,
              17
           ],
           "instructionLink":"<a href=\'https://www.digitallernen.ch/themen/moodle/\' target='_blank'>digitallernen.ch</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'>FDL</a>"
        },
        {
           "name":"Moodle Glossar",
           "scenario":[
              3,
              4,
              5,
              6,
              7,
              13,
              14,
              15,
              17
           ],
           "instructionLink":"<a href=\'https://www.digitallernen.ch/themen/moodle/\' target='_blank'>digitallernen.ch</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'>FDL</a>"
        },
        {
           "name":"Moodle Feedback/Befragung",
           "scenario":[
              10,
              11,
              13
           ],
           "instructionLink":"<a href=\'https://www.digitallernen.ch/themen/moodle/\' target='_blank'>digitallernen.ch</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'>FDL</a>"
        },
        {
           "name":"<a href='https://www.fhnw.ch/de/die-fhnw/bibliotheken/bibliothek-olten/aktuelles/anlegen_digisem_anleitungdozierende-1.pdf' target='_blank' download>Digitaler Semesterapparat</a>",
           "scenario":[
              12,
              13,
              14,
              15,
              17
           ],
           "instructionLink":"<a href=\'https://www.digitallernen.ch/forschung/projekte/digitaler-semesterapparat-in-moodle/\' target='_blank'>digitallernen.ch</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'>FDL</a>"
        },
        {
           "name":"Turnitin",
           "scenario":[
              4,
              12,
              13,
              14,
              15,
              16,
              17
           ],
           "instructionLink":"<a href=\'https://www.fhnw.ch/plattformen/plagiat/\' target='_blank'>digitallernen.ch</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'>FDL</a>"
        },
        {
           "name":"SWITCH Dienste",
           "scenario":[
              0,
              1,
              2,
              3,
              4,
              5,
              6,
              7,
              8,
              9,
              12,
              13,
              14,
              15,
              16,
              17
           ],
           "instructionLink":"<a href=\'\' target='_blank'></a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'>FDL</a>"
        },
        {
           "name":"<a href='https://www.digitallernen.ch/e-portfolios/' target='_blank'>SWITCHportfolio</a>",
           "scenario":[
              0,
              2,
              3,
              5,
              6,
              10,
              11,
              14,
              15,
              17
           ],
           "instructionLink":"<a href=\'https://www.digitallernen.ch/themen/e-portfolio/\' target='_blank'>digitallernen.ch</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'>FDL</a>"
        },
        {
           "name":"<a href='https://www.switch.ch/de/services/filesender/' target='_blank'>SWITCHfilesender</a>",
           "scenario":[
              6,
              7,
              12,
              13,
              14,
              15,
              17
           ],
           "instructionLink":"<a href='https://www.digitallernen.ch/methoden/organisieren/' target='_blank'>digitallernen.ch</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'>FDL</a>"
        },
        {
           "name":"<a href='https://www.switch.ch/de/services/drive/' target='_blank'>SWITCHdrive</a>",
           "scenario":[
              3,
              6,
              7,
              12,
              13,
              14,
              15,
              16,
              17
           ],
           "instructionLink":"<a href='https://www.digitallernen.ch/methoden/organisieren/' target='_blank'>digitallernen.ch</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'>FDL</a>"
        },
        {
           "name":"<a href='https://www.switch.ch/tube/' target='_blank'>SWITCHtube</a>",
           "scenario":[
              4,
              6,
              7,
              12,
              13,
              14,
              15,
              17
           ],
           "instructionLink":"<a href=\'https://www.digitallernen.ch/themen/video/\' target='_blank'>digitallernen.ch</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'>FDL</a>"
        },
        {
           "name":"<a href='https://www.switch.ch/cast/' target='_blank'>SWITCHcast und annotate</a>",
           "scenario":[
              10,
              11,
              13,
              14,
              15,
              17
           ],
           "instructionLink":"<a href=\'https://www.digitallernen.ch/themen/video/#video-auf-switchtube-bereitstellen\' target='_blank'>digitallernen.ch</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'>FDL</a>"
        },
        {
           "name":"<a href='https://www.switch.ch/interact/' target='_blank'>SWITCHinteract</a>",
           "scenario":[
              0,
              1,
              3,
              4,
              9,
              13,
              15,
              16
           ],
           "instructionLink":"<a href=\'https://www.digitallernen.ch/methoden/kommunizieren/#switchinteract\' target='_blank'>digitallernen.ch</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'>FDL</a>"
        },
        {
           "name":"<a href='https://open.meet.switch.ch/' target='_blank'>Jitsi (SWITCH Open Meet)</a>",
           "scenario":[
              0,
              1,
              3,
              4,
              9,
              13,
              14,
              15,
              16
           ],
           "instructionLink":"<a href=\'\' target='_blank'></a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'></a>"
        },
        {
           "name":"Zoom [4]",
           "scenario":[
              0,
              1,
              3,
              4,
              9,
              13,
              14,
              15,
              16
           ],
           "instructionLink":"<a href=\'https://welcome.inside.fhnw.ch/hsle2025/Seiten/Zoom.aspx\' target='_blank'>Plattform Lehre</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'></a>"
        },
        {
           "name":"<a href='https://groups.inside.fhnw.ch/workspace_sites/HSLEDemo/Pages/WebEx.aspx' target='_blank'>Webex</a>",
           "scenario":[
              0,
              1,
              3,
              4,
              9,
              13,
              14,
              15,
              16
           ],
           "instructionLink":"<a href=\'https://welcome.inside.fhnw.ch/organisation/hochschule/services/cit/seiten/videokonferenz.aspx\' target='_blank'>CIT</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'></a>"
        },
        {
           "name":"<a href='https://welcome.inside.fhnw.ch/toolsandservices/SitePages/MyPhone.aspx%23manualsPhone' target='_blank'>Jabber</a>",
           "scenario":[
              0,
              1,
              4,
              13,
              14,
              15,
              16
           ],
           "instructionLink":"<a href=\'https://welcome.inside.fhnw.ch/toolsandservices/SitePages/MyPhone.aspx#manualsPhone\' target='_blank'>CIT</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'></a>"
        },
        {
           "name":"Groups Inside",
           "scenario":[
              3,
              12,
              13,
              14,
              15,
              17
           ],
           "instructionLink":"<a href=\'https://groups.inside.fhnw.ch/workspace_sites/InsideHelp/SitePages/Home.aspx\' target='_blank'>CIT</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'></a>"
        },
        {
           "name":"<a href='https://www.digitallernen.ch/methoden/organisieren/' target='_blank'>Laufwerke FHNW</a>",
           "scenario":[
              3,
              12,
              13,
              14,
              15,
              17
           ],
           "instructionLink":"<a href=\'https://www.digitallernen.ch/methoden/organisieren/dateiablage-mit-laufwerk-fhnw/\' target='_blank'>digitallernen.ch</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'></a>"
        },
        {
           "name":"<a href='https://www.digitallernen.ch/methoden/organisieren/' target='_blank'>Literaturverwaltung (Citavi, Litlink, Zotero)</a>",
           "scenario":[
              3,
              12,
              13,
              14,
              15,
              17
           ],
           "instructionLink":"<a href=\'https://www.digitallernen.ch/methoden/organisieren/literatur-verwalten/\' target='_blank'>digitallernen.ch</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'></a>"
        },
        {
           "name":"MS Teams [4]",
           "scenario":[
              0,
              1,
              2,
              3,
              4,
              9,
              13,
              14,
              16,
              17
           ],
           "instructionLink":"<a href=\'https://welcome.inside.fhnw.ch/hsle2025/Seiten/Microsoft-Teams.aspx\' target='_blank'>Plattform Lehre</a>",
           "helpLink":"<a href=\'https://www.digitallernen.ch/termine/\' target='_blank'></a>"
        }
     ]
}
`;

var app = new Vue({
    el: '#app',
    data: {
        sortKey: 1,
        filterKey: '',
        search: '',
        activeFilterArr: [],

        reverse: false,
        toolList: JSON.parse(jsonToolList).tool,
        tools: JSON.parse(jsonToolList).tool
    },

    computed: {
        filteredTools: function() {
            var self = this;

            // sort name
            if (self.sortKey == 1) {
                self.tools = self.toolList;
            } else {
                self.tools = self.toolList.slice().sort(function(a, b) {
                    if (self.sortKey == 2) {
                        return (a.name > b.name) ? 1 : -1;
                    } else {
                        return (a.name > b.name) ? -1 : 1;
                    }
                });
            }

            // filter search
            self.tools = self.tools.filter(function(t) {
                return t.name.toLowerCase().includes(self.search.toLowerCase());
            });


            // filter num
            self.tools = self.tools.filter(function(t) {
                return self.activeFilterArr.every(r => t.scenario.includes(r))
            });

            return self.tools;
        }
    },

    methods: {
        hasScenario: function(tool, num) {
            return tool.scenario.includes(num) ? "x" : "";
        },
        sortBy: function(key) {
            var self = this;
            if (self.sortKey < 3) {
                self.sortKey += 1;
            } else {
                self.sortKey = 1;
            }
        },
        filterBy: function(key) {
            var self = this;
            var keyParsed = parseInt(key);
            if (self.activeFilterArr.includes(keyParsed)) {
                self.activeFilterArr.remove(keyParsed);
            } else {
                self.activeFilterArr.push(parseInt(keyParsed));
            }
        }
    }
});

$(document).ready(function() {
    $(".toolTable>th:not(.notSelectDown)").click(function() {
        $(this).toggleClass("hightlight");

        $(this).find("i").text(function(i, text) {
            return text === "add" ? "clear" : "add";
        });
    });

    // not for all userAgents
    if ((navigator.userAgent.search("Chrome") >= 0) || 
    (navigator.userAgent.search("Safari") >= 0 && navigator.userAgent.search("Chrome") < 0) ||
    (navigator.userAgent.search("MSIE") >= 0))  {

      // only for desktops
      if ($(window).width() > 768) {
         $(".overflowScrollX ").scroll(function() {
            var scrollPos = $('.overflowScrollX').scrollLeft();
            $(".table tr th:nth-child(1)").css('left', scrollPos);
            $(".table tr th:nth-child(1)").css('z-index', 1);
            if (scrollPos > 0) {
                  $(".table tr th:nth-child(1)").css('background-color', "white");
            } else {
                  $(".table tr th:nth-child(1)").css('background-color', "inherit");
            }
       });
      }
    }
});

Array.prototype.remove = function() {
    var what, a = arguments,
        L = a.length,
        ax;
    while (L && this.length) {
        what = a[--L];
        while ((ax = this.indexOf(what)) !== -1) {
            this.splice(ax, 1);
        }
    }
    return this;
};
